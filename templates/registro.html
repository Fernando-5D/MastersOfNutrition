<!DOCTYPE html>
<html lang="es-mx">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Registro</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous"></script>
</head>
<body style="background-color:rgb(127, 199, 127)">
<main>
    <div class="container d-flex justify-content-center align-items-center mt-5">
    <div class="card shadow-sm rounded-3" style="width: 400px;">
        <div class="card-body rounded-3 border border-3 border border-success" style="background-color: rgb(195, 250, 183)">
        <h3 class="text-center mt-3 mb-4" style="font-family: Times New Roman">Crea tu cuenta</h3>
        <div class="text-center mb-3">
            <img id="imagenPersona" src="static/otro.png" width="100" class="rounded-circle border border-warning border-3">
        </div>

        <form action="/registrando" method="post">
            <div class="mb-3">
            <label for="nombre" class="form-label" style="font-family: Times New Roman">Nombre Completo</label>
            <input type="text" class="form-control" id="nombre" name="nombre">
            </div>

            <div class="mb-3">
            <label for="fecha" class="form-label" style="font-family: Times New Roman">Fecha de Nacimiento</label>
            <input type="date" class="form-control" id="fecha" name="fecha">
            </div>

            <div class="mb-3">
            <label class="form-label" style="font-family: Times New Roman">Género</label><br>
            <input type="radio" class="form-check-input" id="female" name="Genero" value="female">
            <label class="form-check-label" for="female" style="font-family: Times New Roman">Femenino</label>

            <input type="radio" class="form-check-input" id="male" name="Genero" value="male">
            <label class="form-check-label" for="male" style="font-family: Times New Roman">Masculino</label>

            <input type="radio" class="form-check-input" id="other" name="Genero" value="other">
            <label class="form-check-label" for="other" style="font-family: Times New Roman">Otro</label>
            </div>

            <div class="mb-3">
            <label for="email" class="form-label" style="font-family: Times New Roman">Correo electrónico</label>
            <input type="email" class="form-control" id="email" name="email">
            </div>

            <div class="mb-3">
            <label for="contraseña" class="form-label" style="font-family: Times New Roman">Contraseña</label>
            <input type="password" class="form-control" id="contraseña" name="contraseña">
            </div>

            <div class="mb-3">
            <label for="contraseñaCon" class="form-label" style="font-family: Times New Roman">Confirma tu contraseña</label>
            <input type="password" class="form-control" id="contraseñaCon" name="contraseñaCon">
            </div>

            <button type="submit" class="btn btn-success w-100 fw-bold">Regístrate</button>
        </form>
        </div>
    </div>
    </div>
</main>

<script>
    const fecha = document.getElementById("fecha");
    const imagen = document.getElementById("imagenPersona");
    const generos = document.querySelectorAll('input[name="Genero"]');

    function actualizarImagen() {
    let nueva = "otro.png";
    const generoSeleccionado = document.querySelector('input[name="Genero"]:checked');
    const fechaNacimiento = fecha.value ? new Date(fecha.value) : null;
    const hoy = new Date();

    let edad = 0;
    if (fechaNacimiento) {
        edad = hoy.getFullYear() - fechaNacimiento.getFullYear();
        const mes = hoy.getMonth() - fechaNacimiento.getMonth();
        if (mes < 0 || (mes === 0 && hoy.getDate() < fechaNacimiento.getDate())) edad--;
    }

    if (generoSeleccionado && fecha.value) {
        if (generoSeleccionado.value === "female") {
        if (edad < 13) nueva = "niña.png";
        else if (edad < 20) nueva = "adolescente_f.png";
        else if (edad < 60) nueva = "mujer.png";
        else nueva = "anciana.png";
        } else if (generoSeleccionado.value === "male") {
        if (edad < 13) nueva = "niño.png";
        else if (edad < 20) nueva = "adolescente_m.png";
        else if (edad < 60) nueva = "hombre.png";
        else nueva = "anciano.png";
        } else {
        nueva = "otro.png";
        }
    } else if (fecha.value) {
        if (edad < 13) nueva = "niño.png";
        else if (edad < 20) nueva = "adolescente.png";
        else if (edad < 60) nueva = "adulto.png";
        else nueva = "anciano.png";
    } else if (generoSeleccionado) {
        if (generoSeleccionado.value === "female") nueva = "mujer.png";
        else if (generoSeleccionado.value === "male") nueva = "hombre.png";
    }
    imagen.src = "static/" + nueva;
    }

    fecha.addEventListener("change", actualizarImagen);
    generos.forEach(g => g.addEventListener("change", actualizarImagen));
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.min.js"
    integrity="sha384-G/EV+4j2dNv+tEPo3++6LCgdCROaejBqfUeNjuKAiuXbjrxilcCdDz6ZAVfHWe1Y"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
    crossorigin="anonymous"></script>
</body>
</html>
